---  
layout: post  
title: 如何在博客中嵌入 giscus 评论系统  
name: 2024-05-06-如何在博客中嵌入 giscus 评论系统  
description: 只需要一个github账号就可以在博客中嵌入giscus评论系统  
categories:  
  - 评论系统  
  - 自建网站  
  - giscus  
share: true  
---  
  
## 在 github 创建新仓库  
  
![](https://pic4.zhimg.com/80/v2-8177b83e8b8c4becda9e4e003ef9c6df_720w.webp)  
  
  
## 设置新建的仓库  
  
在新建的仓库的 `settings`->`general`->`Discussions` ，中打开 `Discussions` 功能  
  
![](https://pic4.zhimg.com/80/v2-e79fd557cc20d5d935a8f1f9a7f965b3_720w.webp)  
  
## 安装 giscus 插件  
  
[点击直达](https://github.com/apps/giscus)，在 github 安装 giscus 插件。  
  
## 配置 giscus  
  
[点击直达](https://giscus.app/zh-CN)，对 giscus 进行配置，把 giscus 关联到创建的新仓库  
  
![](https://pic1.zhimg.com/80/v2-bdfa6bcdbdb5b5ede0c7f180be83814c_720w.webp)  
  
设置完成后得到配置代码，格式如下：  
  
```js  
<script src="https://giscus.app/client.js"  
 data-repo="github用户名/步骤1创建的仓库名"  
 data-repo-id="你的date-repo-id"  
 data-category="Announcements"  
 data-category-id="你的data-category-id"  
 data-mapping="pathname"  
 data-strict="0"  
 data-reactions-enabled="1"  
 data-emit-metadata="0"  
 data-input-position="bottom"  
 data-theme="preferred_color_scheme"  
 data-lang="zh-CN"  
 crossorigin="anonymous"  
 async>  
</script>  
```  
  
## 配置数字花园仓库  
  
  在 `src/site/_includes/components/user` 目录下，我们可以给自己的数字花园添加自定义的组件。由于我们是给我们的每篇笔记页面都添加一个评论，所以在该目录下新建 `notes/footer` 目录，在该目录下添加如下文件 `001-comment.njk` ，文件名除了扩展名 `.njk` 外，名字可以随意。文件内容为上述代码。  
  
## 修改页面布局  
  
编辑 `src/_includes/layouts/note.njk` 文件。 默认的布局是如图所示，分为左、中、右  
  
![](https://pic3.zhimg.com/80/v2-9364b719097115ba2b1ca944a32cbd3e_720w.webp)  
  
如果不修改，它会在最底层生成一个横跨左、中、右的一个评论区域，影响美观。而我只是想在中间的底部，加上一个评论区域。在 `note.njk` 文件的 `<main>...</main>` 之间添加如下代码：  
  
```text  
<main>  
 // 底部添加如下代码  
 {% for imp in dynamics.notes.footer %}  
   {% include imp %}  
  {% endfor %}  
</main>  
```  
  
注释掉 main 之后，body 内相同的代码：  
  
```text  
<body>  
 {# {% for imp in dynamics.notes.footer %}  
   {% include imp %}  
  {% endfor %} #}  
  {%include "components/lucideIcons.njk"%}  
</body>  
```  
  
现在的布局如图所示：    
  
![](https://pic4.zhimg.com/80/v2-3c22b7b51100050e1b5ad57394f0645b_720w.webp)  
  
## 最终的效果如图所示  
  
![](https://pic3.zhimg.com/80/v2-17d7e8aba9e3306d4c50e82e43431042_720w.webp)  
  
[本文出处](https://garden.rahc.top/)  
